<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥è¯­æ—¥æœŸå®Œå…¨æŒæ¡ | Japanese Date Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card-gradient {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .sakura-bg {
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 50 C20 50 20 20 50 20 C80 20 80 50 50 50' fill='%23ffffff' fill-opacity='0.1'/%3E%3C/svg%3E");
        }
        .flip-card {
            perspective: 1000px;
        }
        .flip-card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        .flip-card-back {
            transform: rotateY(180deg);
        }
        .wave-animation {
            animation: wave 2s ease-in-out infinite;
        }
        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
        .date-card {
            transition: all 0.3s ease;
        }
        .date-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .btn-press:active {
            transform: scale(0.95);
        }
        .tab-active {
            border-bottom: 3px solid #667eea;
            color: #667eea;
        }
    </style>
</head>
<body class="sakura-bg text-gray-800">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-md shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="text-4xl">ğŸ“…</div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">æ—¥è¯­æ—¥æœŸå®Œå…¨æŒæ¡</h1>
                        <p class="text-sm text-gray-600">Japanese Date Master</p>
                    </div>
                </div>
                <div class="flex space-x-2">
                    <button onclick="switchTab('learn')" id="tab-learn" class="px-4 py-2 font-medium tab-active transition-colors hover:text-purple-600">
                        å­¦ä¹ æ¨¡å¼
                    </button>
                    <button onclick="switchTab('quiz')" id="tab-quiz" class="px-4 py-2 font-medium text-gray-500 transition-colors hover:text-purple-600">
                        æµ‹è¯•æ¨¡å¼
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Stats Bar -->
        <div class="bg-white/80 backdrop-blur rounded-2xl shadow-lg p-6 mb-8 flex flex-wrap justify-between items-center gap-4">
            <div class="flex items-center space-x-4">
                <div class="bg-purple-100 p-3 rounded-full">
                    <span class="text-2xl">ğŸ¯</span>
                </div>
                <div>
                    <p class="text-sm text-gray-600">æŒæ¡è¿›åº¦</p>
                    <p class="text-2xl font-bold text-purple-600" id="progress-text">0/366</p>
                </div>
            </div>
            <div class="flex-1 max-w-md mx-4">
                <div class="bg-gray-200 rounded-full h-3 overflow-hidden">
                    <div id="progress-bar" class="progress-bar bg-gradient-to-r from-purple-500 to-pink-500 h-full rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="bg-pink-100 p-3 rounded-full">
                    <span class="text-2xl">ğŸ”¥</span>
                </div>
                <div>
                    <p class="text-sm text-gray-600">è¿ç»­æ­£ç¡®</p>
                    <p class="text-2xl font-bold text-pink-600" id="streak-count">0</p>
                </div>
            </div>
        </div>

        <!-- Learning Mode -->
        <div id="learn-section" class="fade-in">
            <!-- Month Filter -->
            <div class="flex flex-wrap justify-center gap-2 mb-8" id="month-filters">
                <button onclick="filterMonth('all')" class="month-btn px-4 py-2 rounded-full bg-white shadow-md hover:shadow-lg transition-all bg-purple-600 text-white" data-month="all">
                    å…¨éƒ¨
                </button>
                <!-- æœˆä»½æŒ‰é’®å°†ç”± JS ç”Ÿæˆ -->
            </div>

            <!-- Date Grid -->
            <div id="date-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4">
                <!-- Generated by JS -->
            </div>
        </div>

        <!-- Quiz Mode -->
        <div id="quiz-section" class="hidden fade-in">
            <div class="max-w-2xl mx-auto">
                <div class="bg-white rounded-3xl shadow-2xl p-8 text-center">
                    <div class="mb-6">
                        <span class="text-sm text-gray-500 uppercase tracking-wide">è¯·è¯»å‡ºè¿™ä¸ªæ—¥æœŸ</span>
                        <div class="mt-4 text-6xl font-bold text-gray-800 font-serif" id="quiz-date">1æœˆ1æ—¥</div>
                    </div>

                    <div class="space-y-4 mb-8">
                        <button onclick="speakDate()" class="w-full py-4 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all btn-press flex items-center justify-center space-x-2">
                            <span>ğŸ”Š</span>
                            <span>æ’­æ”¾è¯»éŸ³</span>
                        </button>
                        <button onclick="showAnswer()" class="w-full py-4 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all btn-press">
                            æ˜¾ç¤ºç­”æ¡ˆ
                        </button>
                    </div>

                    <div id="answer-section" class="hidden bg-gray-50 rounded-2xl p-6 space-y-4">
                        <div class="text-3xl font-bold text-purple-600" id="answer-kana">ã„ã¡ãŒã¤ ã¤ã„ãŸã¡</div>
                        <div class="text-xl text-gray-600" id="answer-romaji">Ichigatsu Tsuitachi</div>
                        <div class="flex justify-center space-x-4 mt-6">
                            <button onclick="markCorrect()" class="px-6 py-3 bg-green-500 text-white rounded-full font-bold hover:bg-green-600 transition-colors btn-press">
                                âœ“ æŒæ¡äº†
                            </button>
                            <button onclick="markWrong()" class="px-6 py-3 bg-red-500 text-white rounded-full font-bold hover:bg-red-600 transition-colors btn-press">
                                âœ— å†å­¦ä¹ 
                            </button>
                        </div>
                    </div>

                    <div class="mt-8 flex justify-between items-center text-sm text-gray-500">
                        <span id="quiz-stats">é¢˜ç›®: 1/10</span>
                        <button onclick="generateQuiz()" class="text-purple-600 hover:text-purple-800 font-medium">
                            ä¸‹ä¸€é¢˜ â†’
                        </button>
                    </div>
                </div>

                <!-- Special Notes -->
                <div class="mt-8 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg">
                    <h3 class="font-bold text-yellow-800 mb-2">ğŸ“Œ ç‰¹æ®Šè¯»æ³•æé†’</h3>
                    <ul class="text-sm text-yellow-700 space-y-1">
                        <li>â€¢ 1æ—¥ï¼šã¤ã„ãŸã¡ (Tsuitachi) æˆ– ã„ã¡ã«ã¡</li>
                        <li>â€¢ 2-10æ—¥ï¼šä½¿ç”¨"æ—¥"çš„è®­è¯»ï¼ˆãµã¤ã‹ã€ã¿ã£ã‹...ï¼‰</li>
                        <li>â€¢ 14æ—¥ï¼šã˜ã‚…ã†ã‚ˆã£ã‹ (Juuyokka)</li>
                        <li>â€¢ 20æ—¥ï¼šã¯ã¤ã‹ (Hatsuka)</li>
                        <li>â€¢ 24æ—¥ï¼šã«ã˜ã‚…ã†ã‚ˆã£ã‹ (Nijuuyokka)</li>
                    </ul>
                </div>
            </div>
        </div>

    </main>

    <script>
        // Japanese Date Data
        const monthData = {
            1: { kanji: 'ä¸€æœˆ', kana: 'ã„ã¡ãŒã¤', romaji: 'Ichigatsu' },
            2: { kanji: 'äºŒæœˆ', kana: 'ã«ãŒã¤', romaji: 'Nigatsu' },
            3: { kanji: 'ä¸‰æœˆ', kana: 'ã•ã‚“ãŒã¤', romaji: 'Sangatsu' },
            4: { kanji: 'å››æœˆ', kana: 'ã—ãŒã¤', romaji: 'Shigatsu' },
            5: { kanji: 'äº”æœˆ', kana: 'ã”ãŒã¤', romaji: 'Gogatsu' },
            6: { kanji: 'å…­æœˆ', kana: 'ã‚ããŒã¤', romaji: 'Rokugatsu' },
            7: { kanji: 'ä¸ƒæœˆ', kana: 'ã—ã¡ãŒã¤', romaji: 'Shichigatsu' },
            8: { kanji: 'å…«æœˆ', kana: 'ã¯ã¡ãŒã¤', romaji: 'Hachigatsu' },
            9: { kanji: 'ä¹æœˆ', kana: 'ããŒã¤', romaji: 'Kugatsu' },
            10: { kanji: 'åæœˆ', kana: 'ã˜ã‚…ã†ãŒã¤', romaji: 'Juugatsu' },
            11: { kanji: 'åä¸€æœˆ', kana: 'ã˜ã‚…ã†ã„ã¡ãŒã¤', romaji: 'Juuichigatsu' },
            12: { kanji: 'åäºŒæœˆ', kana: 'ã˜ã‚…ã†ã«ãŒã¤', romaji: 'Juunigatsu' }
        };

        const dayData = {
            1: { kanji: 'ä¸€æ—¥', kana: 'ã¤ã„ãŸã¡', romaji: 'Tsuitachi', special: true },
            2: { kanji: 'äºŒæ—¥', kana: 'ãµã¤ã‹', romaji: 'Futsuka', special: true },
            3: { kanji: 'ä¸‰æ—¥', kana: 'ã¿ã£ã‹', romaji: 'Mikka', special: true },
            4: { kanji: 'å››æ—¥', kana: 'ã‚ˆã£ã‹', romaji: 'Yokka', special: true },
            5: { kanji: 'äº”æ—¥', kana: 'ã„ã¤ã‹', romaji: 'Itsuka', special: true },
            6: { kanji: 'å…­æ—¥', kana: 'ã‚€ã„ã‹', romaji: 'Muika', special: true },
            7: { kanji: 'ä¸ƒæ—¥', kana: 'ãªã®ã‹', romaji: 'Nanoka', special: true },
            8: { kanji: 'å…«æ—¥', kana: 'ã‚ˆã†ã‹', romaji: 'Youka', special: true },
            9: { kanji: 'ä¹æ—¥', kana: 'ã“ã“ã®ã‹', romaji: 'Kokonoka', special: true },
            10: { kanji: 'åæ—¥', kana: 'ã¨ãŠã‹', romaji: 'Tooka', special: true },
            11: { kanji: 'åä¸€æ—¥', kana: 'ã˜ã‚…ã†ã„ã¡ã«ã¡', romaji: 'Juuichinichi' },
            12: { kanji: 'åäºŒæ—¥', kana: 'ã˜ã‚…ã†ã«ã«ã¡', romaji: 'Juuninichi' },
            13: { kanji: 'åä¸‰æ—¥', kana: 'ã˜ã‚…ã†ã•ã‚“ã«ã¡', romaji: 'Juusannichi' },
            14: { kanji: 'åå››æ—¥', kana: 'ã˜ã‚…ã†ã‚ˆã£ã‹', romaji: 'Juuyokka', special: true },
            15: { kanji: 'åäº”æ—¥', kana: 'ã˜ã‚…ã†ã”ã«ã¡', romaji: 'Juugonichi' },
            16: { kanji: 'åå…­æ—¥', kana: 'ã˜ã‚…ã†ã‚ãã«ã¡', romaji: 'Juurokunichi' },
            17: { kanji: 'åä¸ƒæ—¥', kana: 'ã˜ã‚…ã†ã—ã¡ã«ã¡', romaji: 'Juushichinichi' },
            18: { kanji: 'åå…«æ—¥', kana: 'ã˜ã‚…ã†ã¯ã¡ã«ã¡', romaji: 'Juuhatnichi' },
            19: { kanji: 'åä¹æ—¥', kana: 'ã˜ã‚…ã†ãã«ã¡', romaji: 'Juukunichi' },
            20: { kanji: 'äºŒåæ—¥', kana: 'ã¯ã¤ã‹', romaji: 'Hatsuka', special: true },
            21: { kanji: 'äºŒåä¸€æ—¥', kana: 'ã«ã˜ã‚…ã†ã„ã¡ã«ã¡', romaji: 'Nijuuichinichi' },
            22: { kanji: 'äºŒåäºŒæ—¥', kana: 'ã«ã˜ã‚…ã†ã«ã«ã¡', romaji: 'Nijuuninichi' },
            23: { kanji: 'äºŒåä¸‰æ—¥', kana: 'ã«ã˜ã‚…ã†ã•ã‚“ã«ã¡', romaji: 'Nijuusannichi' },
            24: { kanji: 'äºŒåå››æ—¥', kana: 'ã«ã˜ã‚…ã†ã‚ˆã£ã‹', romaji: 'Nijuuyokka', special: true },
            25: { kanji: 'äºŒåäº”æ—¥', kana: 'ã«ã˜ã‚…ã†ã”ã«ã¡', romaji: 'Nijuugonichi' },
            26: { kanji: 'äºŒåå…­æ—¥', kana: 'ã«ã˜ã‚…ã†ã‚ãã«ã¡', romaji: 'Nijuurokunichi' },
            27: { kanji: 'äºŒåä¸ƒæ—¥', kana: 'ã«ã˜ã‚…ã†ã—ã¡ã«ã¡', romaji: 'Nijuushichinichi' },
            28: { kanji: 'äºŒåå…«æ—¥', kana: 'ã«ã˜ã‚…ã†ã¯ã¡ã«ã¡', romaji: 'Nijuuhachinichi' },
            29: { kanji: 'äºŒåä¹æ—¥', kana: 'ã«ã˜ã‚…ã†ãã«ã¡', romaji: 'Nijuukunichi' },
            30: { kanji: 'ä¸‰åæ—¥', kana: 'ã•ã‚“ã˜ã‚…ã†ã«ã¡', romaji: 'Sanjuunichi' },
            31: { kanji: 'ä¸‰åä¸€æ—¥', kana: 'ã•ã‚“ã˜ã‚…ã†ã„ã¡ã«ã¡', romaji: 'Sanjuuichinichi' }
        };

        // State
        let learnedDates = new Set();
        let currentMonth = 'all';
        let currentQuiz = null;
        let streak = 0;
        let quizCount = 0;
        let correctCount = 0;

        // Initialize
        function init() {
            generateMonthFilters();
            renderGrid();
            generateQuiz();
            updateProgress();
        }

        // Generate Month Filter Buttons
        function generateMonthFilters() {
            const container = document.getElementById('month-filters');
            for (let i = 1; i <= 12; i++) {
                const btn = document.createElement('button');
                btn.onclick = () => filterMonth(i);
                btn.className = 'month-btn px-4 py-2 rounded-full bg-white shadow-md hover:shadow-lg transition-all text-gray-700';
                btn.dataset.month = i;
                btn.textContent = i + 'æœˆ';
                container.appendChild(btn);
            }
        }

        // Generate all dates
        function getAllDates() {
            const dates = [];
            for (let m = 1; m <= 12; m++) {
                const daysInMonth = new Date(2024, m, 0).getDate();
                for (let d = 1; d <= daysInMonth; d++) {
                    dates.push({ month: m, day: d });
                }
            }
            return dates;
        }

        // Render Date Grid
        function renderGrid() {
            const grid = document.getElementById('date-grid');
            grid.innerHTML = '';
            
            const dates = getAllDates().filter(date => 
                currentMonth === 'all' || date.month === parseInt(currentMonth)
            );

            dates.forEach(({ month, day }) => {
                const mData = monthData[month];
                const dData = dayData[day];
                const dateKey = `${month}-${day}`;
                const isLearned = learnedDates.has(dateKey);

                const card = document.createElement('div');
                card.className = `date-card flip-card bg-white rounded-2xl shadow-md cursor-pointer h-40 ${isLearned ? 'ring-2 ring-green-400' : ''}`;
                card.onclick = () => toggleCard(card);
                
                card.innerHTML = `
                    <div class="flip-card-inner relative w-full h-full">
                        <div class="flip-card-front absolute w-full h-full flex flex-col items-center justify-center p-4 rounded-2xl card-gradient">
                            <div class="text-3xl font-bold text-gray-800 mb-1">${month}æœˆ${day}æ—¥</div>
                            <div class="text-sm text-gray-500">ç‚¹å‡»ç¿»è½¬</div>
                            ${isLearned ? '<div class="absolute top-2 right-2 text-green-500">âœ“</div>' : ''}
                        </div>
                        <div class="flip-card-back absolute w-full h-full flex flex-col items-center justify-center p-4 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 text-white">
                            <div class="text-lg font-bold mb-1">${mData.kanji}${dData.kanji}</div>
                            <div class="text-2xl font-bold mb-1">${mData.kana}<br>${dData.kana}</div>
                            <div class="text-xs opacity-90">${mData.romaji} ${dData.romaji}</div>
                            ${dData.special ? '<div class="absolute top-2 right-2 text-yellow-300 text-xs">ç‰¹æ®Š</div>' : ''}
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Toggle Card Flip
        function toggleCard(card) {
            card.classList.toggle('flipped');
        }

        // Filter by Month
        function filterMonth(month) {
            currentMonth = month;
            
            // Update button styles
            document.querySelectorAll('.month-btn').forEach(btn => {
                const btnMonth = btn.dataset.month;
                if (btnMonth === String(month) || (month === 'all' && btnMonth === 'all')) {
                    btn.classList.remove('bg-white', 'text-gray-700');
                    btn.classList.add('bg-purple-600', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-gray-700');
                    btn.classList.remove('bg-purple-600', 'text-white');
                }
            });

            renderGrid();
        }

        // Switch Tab
        function switchTab(tab) {
            if (tab === 'learn') {
                document.getElementById('learn-section').classList.remove('hidden');
                document.getElementById('quiz-section').classList.add('hidden');
                document.getElementById('tab-learn').classList.add('tab-active');
                document.getElementById('tab-quiz').classList.remove('tab-active');
            } else {
                document.getElementById('learn-section').classList.add('hidden');
                document.getElementById('quiz-section').classList.remove('hidden');
                document.getElementById('tab-quiz').classList.add('tab-active');
                document.getElementById('tab-learn').classList.remove('tab-active');
                generateQuiz();
            }
        }

        // Generate Quiz Question
        function generateQuiz() {
            const month = Math.floor(Math.random() * 12) + 1;
            const daysInMonth = new Date(2024, month, 0).getDate();
            const day = Math.floor(Math.random() * daysInMonth) + 1;
            
            currentQuiz = { month, day };
            
            document.getElementById('quiz-date').textContent = `${month}æœˆ${day}æ—¥`;
            document.getElementById('answer-section').classList.add('hidden');
            document.getElementById('quiz-stats').textContent = `é¢˜ç›®: ${++quizCount}`;
            
            // Update answer
            const mData = monthData[month];
            const dData = dayData[day];
            document.getElementById('answer-kana').textContent = `${mData.kana} ${dData.kana}`;
            document.getElementById('answer-romaji').textContent = `${mData.romaji} ${dData.romaji}`;
        }

        // Show Answer
        function showAnswer() {
            document.getElementById('answer-section').classList.remove('hidden');
        }

        // Speak Date (using Web Speech API)
        function speakDate() {
            const utterance = new SpeechSynthesisUtterance();
            const mData = monthData[currentQuiz.month];
            const dData = dayData[currentQuiz.day];
            utterance.text = `${mData.kana} ${dData.kana}`;
            utterance.lang = 'ja-JP';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }

        // Mark Correct
        function markCorrect() {
            const dateKey = `${currentQuiz.month}-${currentQuiz.day}`;
            learnedDates.add(dateKey);
            streak++;
            correctCount++;
            updateProgress();
            generateQuiz();
            
            // Visual feedback
            const btn = event.target;
            btn.textContent = 'âœ“ å·²è®°å½•';
            setTimeout(() => btn.textContent = 'âœ“ æŒæ¡äº†', 1000);
        }

        // Mark Wrong
        function markWrong() {
            streak = 0;
            document.getElementById('streak-count').textContent = streak;
            generateQuiz();
        }

        // Update Progress
        function updateProgress() {
            const total = 366; // 2024 is leap year
            const learned = learnedDates.size;
            const percentage = (learned / total) * 100;
            
            document.getElementById('progress-text').textContent = `${learned}/${total}`;
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('streak-count').textContent = streak;
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>
